var bestDeals = [
    {
        "name": "Alphonso Mango Devgad",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/329/original/data?1616795305",
        "qty": "6 pcs",
        "currentPrice": "449",
        "oldPrice": "600"
    },
    {
        "name": "Coconut Tender / Nariyal Pani",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/257/original/data?1612448669",
        "qty": "1 Pc",
        "currentPrice": "39",
        "oldPrice": "49"
    },
    {
        "name": "Tomato (1 Kg)",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/images/images/000/006/605/original/data?1649242645",
        "qty": "1 kg",
        "currentPrice": "42",
        "oldPrice": "45"
    },
    {
        "name": "Cabbage",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VCAB12.png",
        "qty": "1 pc",
        "currentPrice": "9"
    },
    {
        "name": "Onion",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/BONI11.png",
        "qty": "1 kg",
        "currentPrice": "16",
        "oldPrice": "20"
    },
    {
        "name": "Bottle Gourd (Dudhi / Lauki)",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VBOT12.png",
        "qty": "1 pc",
        "currentPrice": "9",
        "oldPrice": "12"
    },
    {
        "name": "Carrot Orange (Local)",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/FCAR1.png",
        "qty": "500 g",
        "currentPrice": "22",
        "oldPrice": "28"
    },
    {
        "name": "Capsicum (Shimla), Green Shimla Mirchi",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VCAP12.png",
        "qty": "250 g",
        "currentPrice": "11",
        "oldPrice": "13"
    },
    {
        "name": "Potato / Batata",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/BPOT11.png",
        "qty": "1 kg",
        "currentPrice": "27",
        "oldPrice": "29"
    },
    {
        "name": "Garlic Bunch / Lahsun / Vellulipaya",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VGAR12.png",
        "qty": "100 g",
        "currentPrice": "7",
        "oldPrice": "10"
    },
    {
        "name": "Chillies Green",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VCHI22.png",
        "qty": "100 g",
        "currentPrice": "10",
        "oldPrice": "12"
    },
    {
        "name": "Sweet Corn Bunch (Bhutta)",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/ESWE13.png",
        "qty": "1 pc",
        "currentPrice": "16",
        "oldPrice": "22"
    },
    {
        "name": "Brinjal Black / Nagpur",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VBRI22.png",
        "qty": "500 g",
        "currentPrice": "17",
        "oldPrice": "24"
    },
    {
        "name": "Beans Chawli",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VCHA12.png",
        "qty": "250 g",
        "currentPrice": "14",
        "oldPrice": "19"
    },
    {
        "name": "Banana Robusta",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/FBAN14.png",
        "qty": "1 kg",
        "currentPrice": "41"
    },
    {
        "name": "Mango Badami",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/135/original/data?1612689931",
        "qty": "1 kg",
        "currentPrice": "109",
        "oldPrice": "119"
    },
    {
        "name": "Tasty Combo (2 Pcs Apple Royal Gala + 1 Kg Banana Robust...",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/240/original/data?1642616123",
        "qty": "1 unit",
        "currentPrice": "112",
        "oldPrice": "115"
    },
    {
        "name": "Mango Lalbhag Sindhura",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/250/original/data?1621065378",
        "qty": "1 Kg",
        "currentPrice": "225"
    },
    {
        "name": "Radish",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VMUL12.png",
        "qty": "500 g",
        "currentPrice": "25",
        "oldPrice": "28"
    },
    {
        "name": "Beans Cluster (Gavar)",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VGAV12.png",
        "qty": "250 g",
        "currentPrice": "12",
        "oldPrice": "16"
    },
    {
        "name": "Brinjal Kateri, Baingan",
        "image": "https://s3.ap-south-1.amazonaws.com/fraazo-prod/products/product_images/000/000/028/original/data?1616765740",
        "qty": "250 g",
        "currentPrice": "10",
        "oldPrice": "15"
    },
    {
        "name": "Drumstick",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/VDRU12.png",
        "qty": "100 g",
        "currentPrice": "4",
        "oldPrice": "6"
    },
    {
        "name": "Spring Onion",
        "image": "https://fraazo-master.s3.ap-south-1.amazonaws.com/products/LSPR11.png",
        "qty": "250 g",
        "currentPrice": "14",
        "oldPrice": "20"
    }
]

function displaySlick(data, slickDiv) {
    slickDiv.innerHTML = null;
    data.forEach(el => {
        // console.log(el);
        card = document.createElement('div');
        card.className = 'card';

        img = document.createElement('img');
        img.className = 'card-img-top bg-light';

        img.src = el.image;
        img.alt = el.name;

        cardBody = document.createElement('div');
        cardBody.className = 'card-body bg-white';
        
        productName = document.createElement('p');
        productName.innerText = el.name;
        productName.className = 'productName fs-14';

        priceQtyBtn = document.createElement('div');
        priceQtyBtn.className = 'price-qty-btn d-flex justify-content-between align-items-center';

        priceQtyDiv = document.createElement('div');
        priceQtyDiv.className = 'price-qty';
        qty = document.createElement('p');
        qty.innerText = el.qty;
        qty.className = 'qty fs-13';

        priceDiv = document.createElement('div');
        priceDiv.className = 'price fw-500';
        price = document.createElement('p');
        price.innerText = "₹"+el.currentPrice;
        price.className = 'fs-16';
        // console.log(el.oldPrice);
        priceDiv.append(price);
        if(el.oldPrice!==undefined) {
            oldPrice = document.createElement('p');
            oldPrice.className = 'fs-16';
            oldPrice.innerText = "₹"+el.oldPrice;
            priceDiv.append(oldPrice);
        }


        priceQtyDiv.append(qty,priceDiv);
        btnDiv = document.createElement('div');
        btnDiv.className = 'addToCartButton';
        
        btn = document.createElement('div');
        btn.className = 'btn btn-outline-cart rounded-pill text-uppercase px-3 py-1 d-flex align-items-center';
        btn.innerHTML = `
            <i class="fa-solid fa-cart-plus"></i>
            <p>ADD</p>
        `;
        btnDiv.append(btn);
        btnDiv.addEventListener('click',function() {
            addToCart(el);
        })

        priceQtyBtn.append(priceQtyDiv,btnDiv);

        cardBody.append(productName,priceQtyBtn);

        card.append(img,cardBody);

        card.addEventListener('click',function(){
            saveItem(el);
        })
        // console.log(card);
        slickDiv.append(card);
    });
    // console.log(slickDiv);
}

function addToCart(el) {
    cart = JSON.parse(localStorage.getItem('cart')) || [];
    alreadyAdded = false;
    cart.forEach(function (el) {

    });
}

function saveItem(el){
    localStorage.setItem('currentItem',JSON.stringify(el));
}

var currentSlickDiv = document.querySelector('#bestDeals > .slick-content');
// console.log(slickDiv);

displaySlick(bestDeals, currentSlickDiv);


products = JSON.parse(localStorage.getItem('products')) || [];
// console.log(products);

fruits = products.filter(function (el) {
    return el.category == "fruits";
})
currentSlickDiv = document.querySelector('#fruitSection > .slick-content');
displaySlick(fruits, currentSlickDiv);

vegetables = products.filter( function (el) {
    return el.category == 'vegetables';
});
currentSlickDiv = document.querySelector('#vegetableSection > .slick-content');
displaySlick(vegetables, currentSlickDiv);

herbs = products.filter( function (el) {
    return el.category == 'herbs';
});
currentSlickDiv = document.querySelector('#herbSection > .slick-content');
displaySlick(herbs, currentSlickDiv);

dryFruits = products.filter( function (el) {
    return el.category == 'dry fruits';
});
currentSlickDiv = document.querySelector('#dryFruitSection > .slick-content');
displaySlick(dryFruits,currentSlickDiv);

kitchenStaples = products.filter( function (el) {
    return el.category == 'kitchen staples';
});
currentSlickDiv = document.querySelector('#kitchenStapleSection > .slick-content');
displaySlick(kitchenStaples, currentSlickDiv);
